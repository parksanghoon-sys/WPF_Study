<Window
    x:Class="wpfCleanArchtecture.UI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:attached="clr-namespace:wpfCleanArchtecture.UI.AttachedProperties"
    xmlns:behaviors="clr-namespace:wpfCleanArchtecture.UI.Behaviors"
    xmlns:converters="clr-namespace:wpfCleanArchtecture.UI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:wpfCleanArchtecture.UI"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Todo 리스트 - 클린 아키텍처"
    Width="900"
    Height="700"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <!--<Window.Resources>

        <Style x:Key="TodoItemContainerStyle" TargetType="{x:Type ContentControl}">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Margin" Value="0,0,0,8" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ContentControl}">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CompletionStates">
                                    <VisualState x:Name="Pending">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="BackgroundBorder"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="White"
                                                Duration="0:0:0.2" />
                                            <ColorAnimation
                                                Storyboard.TargetName="BackgroundBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#E0E0E0"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Completed">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="BackgroundBorder"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="#F0F8F0"
                                                Duration="0:0:0.2" />
                                            <ColorAnimation
                                                Storyboard.TargetName="BackgroundBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#C8E6C9"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="ContentPresenter"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.7"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="TodoItemStyle" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Margin" Value="0,0,0,8" />
            <Setter Property="Padding" Value="16" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F5F5F5" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style
            x:Key="CompletedTodoStyle"
            BasedOn="{StaticResource TodoItemStyle}"
            TargetType="Border">
            <Setter Property="Background" Value="#F0F8F0" />
            <Setter Property="BorderBrush" Value="#C8E6C9" />
        </Style>

        <Style x:Key="PriorityHighStyle" TargetType="Border">
            <Setter Property="Background" Value="#FFEBEE" />
            <Setter Property="BorderBrush" Value="#F44336" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="8,4" />
        </Style>

        <Style x:Key="PriorityMediumStyle" TargetType="Border">
            <Setter Property="Background" Value="#FFF3E0" />
            <Setter Property="BorderBrush" Value="#FF9800" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="8,4" />
        </Style>

        <Style x:Key="PriorityLowStyle" TargetType="Border">
            <Setter Property="Background" Value="#E8F5E8" />
            <Setter Property="BorderBrush" Value="#4CAF50" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="8,4" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

    -->
    <!--  제목  -->
    <!--
        <TextBlock
            Grid.Row="0"
            Margin="0,0,0,20"
            HorizontalAlignment="Center"
            FontSize="28"
            FontWeight="Bold"
            Foreground="#2C3E50"
            Text="Todo 리스트" />

    -->
    <!--  새 할일 추가 섹션  -->
    <!--
        <Border
            Grid.Row="1"
            Margin="0,0,0,20"
            Padding="16"
            Background="#F8F9FA"
            BorderBrush="#DEE2E6"
            BorderThickness="1"
            CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.ColumnSpan="3"
                    Margin="0,0,0,12"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Text="새 할일 추가" />

                <TextBox
                    x:Name="TitleTextBox"
                    Grid.Row="1"
                    Grid.Column="0"
                    Height="35"
                    Margin="0,0,8,8"
                    Padding="8"
                    BorderBrush="#CED4DA"
                    BorderThickness="1"
                    FontSize="14"
                    Text="{Binding NewTodoTitle, UpdateSourceTrigger=PropertyChanged}" />

                <ComboBox
                    x:Name="PriorityComboBox"
                    Grid.Row="1"
                    Grid.Column="1"
                    Width="100"
                    Height="35"
                    Margin="0,0,8,8"
                    SelectedValue="{Binding NewTodoPriority}">
                    <ComboBox.Items>
                        <ComboBoxItem Content="낮음" Tag="Low" />
                        <ComboBoxItem
                            Content="보통"
                            IsSelected="True"
                            Tag="Medium" />
                        <ComboBoxItem Content="높음" Tag="High" />
                    </ComboBox.Items>
                </ComboBox>

                <Button
                    Grid.Row="1"
                    Grid.Column="2"
                    Height="35"
                    MinWidth="60"
                    Padding="16,8"
                    Background="#007BFF"
                    BorderThickness="0"
                    Command="{Binding AddTodoCommand}"
                    Content="추가"
                    Foreground="White"
                    Style="{StaticResource {x:Type Button}}" />

                <TextBox
                    x:Name="DescriptionTextBox"
                    Grid.Row="2"
                    Grid.ColumnSpan="3"
                    Height="60"
                    Margin="0,0,0,0"
                    Padding="8"
                    VerticalContentAlignment="Top"
                    AcceptsReturn="True"
                    BorderBrush="#CED4DA"
                    BorderThickness="1"
                    FontSize="12"
                    Text="{Binding NewTodoDescription, UpdateSourceTrigger=PropertyChanged}"
                    TextWrapping="Wrap"
                    VerticalScrollBarVisibility="Auto" />
            </Grid>
        </Border>

    -->
    <!--  필터 및 컨트롤 섹션  -->
    <!--
        <Grid Grid.Row="2" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBox
                Grid.Column="0"
                Height="32"
                Margin="0,0,8,0"
                Padding="8"
                BorderBrush="#CED4DA"
                BorderThickness="1"
                FontSize="14"
                Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" />

            <CheckBox
                Grid.Column="1"
                Margin="0,0,16,0"
                VerticalAlignment="Center"
                Content="완료됨"
                IsChecked="{Binding ShowCompleted}" />

            <CheckBox
                Grid.Column="2"
                Margin="0,0,16,0"
                VerticalAlignment="Center"
                Content="진행중"
                IsChecked="{Binding ShowPending}" />

            <Button
                Grid.Column="3"
                Height="32"
                Margin="0,0,8,0"
                Padding="12,6"
                Background="#28A745"
                BorderThickness="0"
                Command="{Binding RefreshCommand}"
                Content="새로고침"
                Foreground="White" />

            <Button
                Grid.Column="4"
                Height="32"
                Padding="12,6"
                Background="#DC3545"
                BorderThickness="0"
                Command="{Binding ClearCompletedCommand}"
                Content="완료된 항목 삭제"
                Foreground="White" />
        </Grid>

    -->
    <!--  할일 목록  -->
    <!--
        <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding FilteredTodos}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border>
                            <Border.Style>
                                <Style BasedOn="{StaticResource TodoItemStyle}" TargetType="Border">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                            <Setter Property="Background" Value="#F0F8F0" />
                                            <Setter Property="BorderBrush" Value="#C8E6C9" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

    -->
    <!--  체크박스  -->
    <!--
                                <CheckBox
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Margin="0,2,12,0"
                                    VerticalAlignment="Top"
                                    Command="{Binding ToggleCompletionCommand}"
                                    IsChecked="{Binding IsCompleted}" />

    -->
    <!--  제목과 우선순위  -->
    <!--
                                <StackPanel
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Orientation="Horizontal">
                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="16"
                                        FontWeight="SemiBold"
                                        Text="{Binding Title}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                        <Setter Property="TextDecorations" Value="Strikethrough" />
                                                        <Setter Property="Foreground" Value="#6C757D" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <Border Margin="8,0,0,0">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Priority}" Value="High">
                                                        <Setter Property="Background" Value="#FFEBEE" />
                                                        <Setter Property="BorderBrush" Value="#F44336" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Priority}" Value="Medium">
                                                        <Setter Property="Background" Value="#FFF3E0" />
                                                        <Setter Property="BorderBrush" Value="#FF9800" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Priority}" Value="Low">
                                                        <Setter Property="Background" Value="#E8F5E8" />
                                                        <Setter Property="BorderBrush" Value="#4CAF50" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                                <Setter Property="BorderThickness" Value="1" />
                                                <Setter Property="CornerRadius" Value="4" />
                                                <Setter Property="Padding" Value="6,2" />
                                            </Style>
                                        </Border.Style>
                                        <TextBlock
                                            FontSize="10"
                                            FontWeight="Bold"
                                            Text="{Binding PriorityText}" />
                                    </Border>
                                </StackPanel>

    -->
    <!--  버튼들  -->
    <!--
                                <StackPanel
                                    Grid.Row="0"
                                    Grid.Column="2"
                                    Orientation="Horizontal">
                                    <Button
                                        Margin="0,0,4,0"
                                        Padding="8,4"
                                        Background="#17A2B8"
                                        BorderThickness="0"
                                        Command="{Binding EditCommand}"
                                        Content="편집"
                                        FontSize="12"
                                        Foreground="White" />
                                    <Button
                                        Padding="8,4"
                                        Background="#DC3545"
                                        BorderThickness="0"
                                        Command="{Binding DeleteCommand}"
                                        Content="삭제"
                                        FontSize="12"
                                        Foreground="White" />
                                </StackPanel>

    -->
    <!--  설명  -->
    <!--
                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Grid.ColumnSpan="2"
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    Foreground="#6C757D"
                                    Text="{Binding Description}"
                                    TextWrapping="Wrap">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Description}" Value="">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>

    -->
    <!--  날짜 정보  -->
    <!--
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Grid.ColumnSpan="2"
                                    Margin="0,8,0,0"
                                    FontSize="10"
                                    Foreground="#ADB5BD">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="생성: {0} | 상태: {1}">
                                            <Binding Path="CreatedAtText" />
                                            <Binding Path="StatusText" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

    -->
    <!--  상태바  -->
    <!--
        <StatusBar
            Grid.Row="4"
            Height="30"
            Background="#F8F9FA">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>

            <StatusBarItem Grid.Column="0">
                <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="전체: {0}개, 완료: {1}개, 진행중: {2}개">
                            <Binding Path="Todos.Count" />
                            <Binding Path="CompletedCount" />
                            <Binding Path="PendingCount" />
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </StatusBarItem>

            <StatusBarItem Grid.Column="1">
                <TextBlock
                    FontStyle="Italic"
                    Foreground="#6C757D"
                    Text="클린 아키텍처 + MVVM" />
            </StatusBarItem>
        </StatusBar>

    -->
    <!--  로딩 오버레이  -->
    <!--
        <Grid
            Grid.RowSpan="5"
            Background="#80000000"
            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <Border
                Padding="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="White"
                CornerRadius="8">
                <StackPanel Orientation="Horizontal">
                    <ProgressBar
                        Width="20"
                        Height="20"
                        Margin="0,0,8,0"
                        IsIndeterminate="True" />
                    <TextBlock VerticalAlignment="Center" Text="로딩 중..." />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>-->
    <Window.Resources>
        <converters:PriorityToVisualStateConverter x:Key="PriorityToVisualStateConverter" />
        <converters:StringToBoolConverter x:Key="StringToBoolConverter" />
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter" />
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />

        <!--  향상된 TodoItem 스타일  -->
        <Style x:Key="EnhancedTodoItemStyle" TargetType="ContentControl">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />

            <Setter Property="Margin" Value="0,0,0,8" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect
                        BlurRadius="8"
                        Opacity="0.1"
                        ShadowDepth="2"
                        Color="Black" />
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContentControl">
                        <Border
                            x:Name="PART_RootBorder"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8"
                            Effect="{TemplateBinding Effect}"
                            RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform x:Name="PART_ScaleTransform" />
                                    <TranslateTransform x:Name="PART_TranslateTransform" />
                                </TransformGroup>
                            </Border.RenderTransform>

                            <!--  우선순위 글로우 효과  -->
                            <!--<Border
                                x:Name="PART_PriorityGlow"
                                Margin="-1"
                                Background="#FF9800"
                                CornerRadius="8"
                                Opacity="0" />-->

                            <ContentPresenter x:Name="ContentPresenter" />

                            <VisualStateManager.VisualStateGroups>
                                <!--  완료 상태 그룹  -->
                                <VisualStateGroup x:Name="CompletionStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.3">
                                            <VisualTransition.GeneratedEasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </VisualTransition.GeneratedEasingFunction>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>

                                    <VisualState x:Name="Pending">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="White"
                                                Duration="0:0:0.3" />
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#E0E0E0"
                                                Duration="0:0:0.3" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="ContentPresenter"
                                                Storyboard.TargetProperty="Opacity"
                                                To="1.0"
                                                Duration="0:0:0.3" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Completed">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="#F0F8F0"
                                                Duration="0:0:0.3" />
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#C8E6C9"
                                                Duration="0:0:0.3" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="ContentPresenter"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.7"
                                                Duration="0:0:0.3" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>

                                <!--  상호작용 상태 그룹  -->
                                <VisualStateGroup x:Name="InteractionStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.2" />
                                    </VisualStateGroup.Transitions>

                                    <VisualState x:Name="Normal" />

                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ScaleTransform"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="1.02"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ScaleTransform"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="1.02"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_TranslateTransform"
                                                Storyboard.TargetProperty="Y"
                                                To="-2"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ScaleTransform"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="0.98"
                                                Duration="0:0:0.1" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ScaleTransform"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="0.98"
                                                Duration="0:0:0.1" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>

                                <!--  우선순위 상태 그룹  -->
                                <VisualStateGroup x:Name="PriorityStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.2" />
                                    </VisualStateGroup.Transitions>

                                    <VisualState x:Name="LowPriority">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#4CAF50"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_PriorityGlow"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.1"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="MediumPriority">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#FF9800"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_PriorityGlow"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.15"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="HighPriority">
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                To="#F44336"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_PriorityGlow"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.2"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_RootBorder"
                                                Storyboard.TargetProperty="BorderThickness"
                                                To="2"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--  애니메이션 버튼 스타일  -->
        <Style x:Key="AnimatedButtonStyle" TargetType="Button">
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            x:Name="PART_ButtonBorder"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4"
                            RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform x:Name="PART_ButtonScale" />
                            </Border.RenderTransform>

                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.1" />
                                    </VisualStateGroup.Transitions>

                                    <VisualState x:Name="Normal" />

                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonScale"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="1.05"
                                                Duration="0:0:0.1" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonScale"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="1.05"
                                                Duration="0:0:0.1" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonBorder"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.9"
                                                Duration="0:0:0.1" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonScale"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="0.95"
                                                Duration="0:0:0.05" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonScale"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="0.95"
                                                Duration="0:0:0.05" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonBorder"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.7"
                                                Duration="0:0:0.05" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_ButtonBorder"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0.3"
                                                Duration="0:0:0.1" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--  포커스 효과가 있는 TextBox 스타일  -->
        <Style x:Key="FocusEffectTextBoxStyle" TargetType="TextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <Border
                                x:Name="PART_TextBoxBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                                <ScrollViewer
                                    x:Name="PART_ContentHost"
                                    Margin="{TemplateBinding Padding}"
                                    VerticalAlignment="Center" />

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="FocusStates">
                                        <VisualStateGroup.Transitions>
                                            <VisualTransition GeneratedDuration="0:0:0.2" />
                                        </VisualStateGroup.Transitions>

                                        <VisualState x:Name="Unfocused">
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetName="PART_TextBoxBorder"
                                                    Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                    To="#CED4DA" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="PART_FocusGlow"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="PART_TextBoxBorder"
                                                    Storyboard.TargetProperty="(Border.BorderThickness)"
                                                    To="1" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="Focused">
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetName="PART_TextBoxBorder"
                                                    Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                    To="#007BFF" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="PART_FocusGlow"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0.3" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="PART_TextBoxBorder"
                                                    Storyboard.TargetProperty="(Border.BorderThickness)"
                                                    To="2" />
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="ValidationStates">
                                        <VisualState x:Name="Valid" />
                                        <VisualState x:Name="InvalidFocused">
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetName="PART_TextBoxBorder"
                                                    Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                    To="#DC3545" />
                                                <ColorAnimation
                                                    Storyboard.TargetName="PART_FocusGlow"
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="#DC3545" />
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Border>

                            <!--  포커스 글로우 효과  -->
                            <Border
                                x:Name="PART_FocusGlow"
                                Margin="-2"
                                Background="#007BFF"
                                CornerRadius="4"
                                IsHitTestVisible="False"
                                Opacity="0" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  제목 with 그라디언트 효과  -->
        <Border
            Grid.Row="0"
            Margin="0,0,0,20"
            HorizontalAlignment="Center">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Offset="0" Color="#667eea" />
                    <GradientStop Offset="1" Color="#764ba2" />
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="10"
                    Opacity="0.3"
                    ShadowDepth="3" />
            </Border.Effect>
            <TextBlock
                Padding="20,10"
                FontSize="28"
                FontWeight="Bold"
                Foreground="White"
                Text="Todo 리스트 (VSM Enhanced)" />
        </Border>

        <!--  새 할일 추가 섹션  -->
        <Border
            Grid.Row="1"
            Margin="0,0,0,20"
            Padding="20"
            Background="#F8F9FA"
            BorderBrush="#DEE2E6"
            BorderThickness="1"
            CornerRadius="12">
            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="8"
                    Opacity="0.1"
                    ShadowDepth="2" />
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Grid.ColumnSpan="3"
                    Margin="0,0,0,16"
                    FontSize="18"
                    FontWeight="SemiBold"
                    Foreground="#495057"
                    Text="✨ 새 할일 추가" />

                <TextBox
                    x:Name="TitleTextBox"
                    Grid.Row="1"
                    Grid.Column="0"
                    Height="40"
                    Margin="0,0,12,12"
                    Padding="12"
                    Background="White"
                    BorderBrush="#CED4DA"
                    BorderThickness="1"
                    FontSize="14"
                    Style="{StaticResource FocusEffectTextBoxStyle}"
                    Text="{Binding NewTodoTitle, UpdateSourceTrigger=PropertyChanged}">
                    <i:Interaction.Behaviors>
                        <behaviors:TextBoxFocusVisualStateBehavior IsValid="{Binding Path=Text, RelativeSource={RelativeSource AncestorType=TextBox}, Converter={StaticResource StringToBoolConverter}}" />
                    </i:Interaction.Behaviors>
                </TextBox>

                <ComboBox
                    x:Name="PriorityComboBox"
                    Grid.Row="1"
                    Grid.Column="1"
                    Width="120"
                    Height="40"
                    Margin="0,0,12,12"
                    Background="White"
                    BorderBrush="#CED4DA"
                    SelectedValue="{Binding NewTodoPriority}">
                    <ComboBox.Items>
                        <ComboBoxItem Content="🟢 낮음" Tag="Low" />
                        <ComboBoxItem
                            Content="🟡 보통"
                            IsSelected="True"
                            Tag="Medium" />
                        <ComboBoxItem Content="🔴 높음" Tag="High" />
                    </ComboBox.Items>
                </ComboBox>

                <Button
                    Grid.Row="1"
                    Grid.Column="2"
                    Height="40"
                    MinWidth="80"
                    Padding="20,10"
                    Background="#007BFF"
                    BorderThickness="0"
                    Command="{Binding AddTodoCommand}"
                    Content="➕ 추가"
                    FontSize="14"
                    Foreground="White"
                    Style="{StaticResource AnimatedButtonStyle}" />

                <TextBox
                    x:Name="DescriptionTextBox"
                    Grid.Row="2"
                    Grid.ColumnSpan="3"
                    Height="70"
                    Padding="12"
                    VerticalContentAlignment="Top"
                    AcceptsReturn="True"
                    Background="White"
                    BorderBrush="#CED4DA"
                    BorderThickness="1"
                    FontSize="12"
                    Style="{StaticResource FocusEffectTextBoxStyle}"
                    Text="{Binding NewTodoDescription, UpdateSourceTrigger=PropertyChanged}"
                    TextWrapping="Wrap"
                    VerticalScrollBarVisibility="Auto" />
            </Grid>
        </Border>

        <!--  필터 및 컨트롤 섹션  -->
        <Border
            Grid.Row="2"
            Margin="0,0,0,16"
            Padding="16"
            Background="White"
            BorderBrush="#E9ECEF"
            BorderThickness="1"
            CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox
                    Grid.Column="0"
                    Height="36"
                    Margin="0,0,12,0"
                    Padding="12"
                    Background="White"
                    BorderBrush="#CED4DA"
                    BorderThickness="1"
                    FontSize="14"
                    Style="{StaticResource FocusEffectTextBoxStyle}"
                    Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" />

                <CheckBox
                    Grid.Column="1"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"
                    Content="✅ 완료됨"
                    FontSize="14"
                    IsChecked="{Binding ShowCompleted}" />

                <CheckBox
                    Grid.Column="2"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"
                    Content="⏳ 진행중"
                    FontSize="14"
                    IsChecked="{Binding ShowPending}" />

                <Button
                    Grid.Column="3"
                    Height="36"
                    Margin="0,0,8,0"
                    Padding="12,8"
                    Background="#28A745"
                    BorderThickness="0"
                    Command="{Binding RefreshCommand}"
                    Content="🔄 새로고침"
                    FontSize="12"
                    Foreground="White"
                    Style="{StaticResource AnimatedButtonStyle}" />

                <Button
                    Grid.Column="4"
                    Height="36"
                    Padding="12,8"
                    Background="#DC3545"
                    BorderThickness="0"
                    Command="{Binding ClearCompletedCommand}"
                    Content="🗑️ 완료 삭제"
                    FontSize="12"
                    Foreground="White"
                    Style="{StaticResource AnimatedButtonStyle}" />
            </Grid>
        </Border>

        <!--  할일 목록  -->
        <ScrollViewer
            Grid.Row="3"
            PanningMode="VerticalOnly"
            VerticalScrollBarVisibility="Auto">
            <Grid>
                <!--  할일 목록  -->
                <ItemsControl ItemsSource="{Binding FilteredTodos}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                                attached:VisualStateManagerAttachedProperties.IsCompleted="{Binding IsCompleted}"
                                attached:VisualStateManagerAttachedProperties.Priority="{Binding Priority}"
                                Style="{StaticResource EnhancedTodoItemStyle}">
                                <i:Interaction.Behaviors>
                                    <behaviors:TodoItemVisualStateBehavior TodoViewModel="{Binding}" />
                                </i:Interaction.Behaviors>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!--  체크박스  -->
                                    <CheckBox
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Width="20"
                                        Height="20"
                                        Margin="0,4,16,0"
                                        VerticalAlignment="Top"
                                        Command="{Binding ToggleCompletionCommand}"
                                        IsChecked="{Binding IsCompleted}" />

                                    <!--  제목과 우선순위  -->
                                    <StackPanel
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Orientation="Horizontal">
                                        <TextBlock
                                            x:Name="TitleText"
                                            VerticalAlignment="Center"
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Text="{Binding Title}" />

                                        <Border
                                            x:Name="PriorityBadge"
                                            Margin="12,0,0,0"
                                            Padding="8,4"
                                            BorderThickness="1"
                                            CornerRadius="12">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Priority}" Value="High">
                                                            <Setter Property="Background" Value="#FFEBEE" />
                                                            <Setter Property="BorderBrush" Value="#F44336" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Priority}" Value="Medium">
                                                            <Setter Property="Background" Value="#FFF3E0" />
                                                            <Setter Property="BorderBrush" Value="#FF9800" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Priority}" Value="Low">
                                                            <Setter Property="Background" Value="#E8F5E8" />
                                                            <Setter Property="BorderBrush" Value="#4CAF50" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock
                                                FontSize="10"
                                                FontWeight="Bold"
                                                Text="{Binding PriorityText}" />
                                        </Border>
                                    </StackPanel>

                                    <!--  버튼들  -->
                                    <StackPanel
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        Orientation="Horizontal">
                                        <Button
                                            Margin="0,0,8,0"
                                            Padding="8,4"
                                            Background="#17A2B8"
                                            BorderThickness="0"
                                            Command="{Binding EditCommand}"
                                            Content="✏️"
                                            FontSize="12"
                                            Foreground="White"
                                            Style="{StaticResource AnimatedButtonStyle}"
                                            ToolTip="편집" />
                                        <Button
                                            Padding="8,4"
                                            Background="#DC3545"
                                            BorderThickness="0"
                                            Command="{Binding DeleteCommand}"
                                            Content="🗑️"
                                            FontSize="12"
                                            Foreground="White"
                                            Style="{StaticResource AnimatedButtonStyle}"
                                            ToolTip="삭제" />
                                    </StackPanel>

                                    <!--  설명  -->
                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Grid.ColumnSpan="2"
                                        Margin="0,8,0,0"
                                        FontSize="12"
                                        Foreground="#6C757D"
                                        Text="{Binding Description}"
                                        TextWrapping="Wrap"
                                        Visibility="{Binding Description, Converter={StaticResource StringToVisibilityConverter}}" />

                                    <!--  날짜 정보  -->
                                    <TextBlock
                                        Grid.Row="2"
                                        Grid.Column="1"
                                        Grid.ColumnSpan="2"
                                        Margin="0,12,0,0"
                                        FontSize="10"
                                        Foreground="#ADB5BD">
                                        <TextBlock.Text>
                                            <MultiBinding StringFormat="📅 생성: {0} | 📊 상태: {1}">
                                                <Binding Path="CreatedAtText" />
                                                <Binding Path="StatusText" />
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>

                    <!--  아이템 컨테이너 애니메이션  -->
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <TranslateTransform X="0" Y="20" />
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Opacity" Value="0" />
                            <Style.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                                To="0"
                                                Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut" />
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="Opacity"
                                                To="1"
                                                Duration="0:0:0.3" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Style.Triggers>
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                </ItemsControl>

                <!--  빈 상태 표시  -->
                <StackPanel
                    x:Name="EmptyStatePanel"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Opacity="0"
                    Visibility="Collapsed">
                    <TextBlock
                        x:Name="EmptyStateIcon"
                        Margin="0,0,0,20"
                        HorizontalAlignment="Center"
                        FontSize="64"
                        RenderTransformOrigin="0.5,0.5"
                        Text="📝">
                        <TextBlock.RenderTransform>
                            <ScaleTransform ScaleX="1" ScaleY="1" />
                        </TextBlock.RenderTransform>
                    </TextBlock>
                    <TextBlock
                        Margin="0,0,0,12"
                        HorizontalAlignment="Center"
                        FontSize="20"
                        FontWeight="SemiBold"
                        Foreground="#495057"
                        Text="할일이 없습니다" />
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="14"
                        Foreground="#6C757D"
                        Text="위에서 새로운 할일을 추가해보세요! ✨" />
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!--  향상된 상태바  -->
        <Border
            Grid.Row="4"
            Height="40"
            Background="White"
            BorderBrush="#E9ECEF"
            BorderThickness="0,1,0,0">
            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="4"
                    Direction="90"
                    Opacity="0.1"
                    ShadowDepth="1" />
            </Border.Effect>

            <Grid Margin="16,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock FontSize="12" Foreground="#495057">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="📊 전체: {0}개 | ✅ 완료: {1}개 | ⏳ 진행중: {2}개">
                                <Binding Path="Todos.Count" />
                                <Binding Path="CompletedCount" />
                                <Binding Path="PendingCount" />
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </StackPanel>

                <TextBlock
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    FontSize="11"
                    FontStyle="Italic"
                    Foreground="#6C757D"
                    Text="🏗️ 클린 아키텍처 + MVVM + VSM" />
            </Grid>
        </Border>

        <!--  고급 로딩 오버레이  -->
        <Grid
            x:Name="LoadingOverlay"
            Grid.RowSpan="5"
            Background="#80000000"
            Opacity="0"
            Visibility="Collapsed">
            <Border
                MinWidth="200"
                Padding="32"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="White"
                CornerRadius="16">
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="20"
                        Opacity="0.3"
                        ShadowDepth="5" />
                </Border.Effect>

                <StackPanel>
                    <!--  로딩 스피너  -->
                    <Grid
                        Width="60"
                        Height="60"
                        Margin="0,0,0,20">
                        <Ellipse
                            Width="60"
                            Height="60"
                            Stroke="#E9ECEF"
                            StrokeThickness="6" />
                        <Ellipse
                            x:Name="LoadingSpinner"
                            Width="60"
                            Height="60"
                            RenderTransformOrigin="0.5,0.5"
                            Stroke="#007BFF"
                            StrokeDashArray="20,40"
                            StrokeDashOffset="0"
                            StrokeThickness="6">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotation" />
                            </Ellipse.RenderTransform>
                        </Ellipse>
                    </Grid>

                    <!--  로딩 텍스트  -->
                    <TextBlock
                        Margin="0,0,0,8"
                        HorizontalAlignment="Center"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Foreground="#495057"
                        Text="로딩 중..." />
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="12"
                        Foreground="#6C757D"
                        Text="잠시만 기다려주세요..." />
                </StackPanel>

                <!--  로딩 애니메이션  -->
                <Border.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever">
                                <!--  스피너 회전  -->
                                <DoubleAnimation
                                    RepeatBehavior="Forever"
                                    Storyboard.TargetName="SpinnerRotation"
                                    Storyboard.TargetProperty="Angle"
                                    From="0"
                                    To="360"
                                    Duration="0:0:1" />
                                <!--  스트로크 대시 오프셋  -->
                                <DoubleAnimation
                                    RepeatBehavior="Forever"
                                    Storyboard.TargetName="LoadingSpinner"
                                    Storyboard.TargetProperty="StrokeDashOffset"
                                    From="0"
                                    To="60"
                                    Duration="0:0:1.5" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Border.Triggers>
            </Border>
        </Grid>
        <VisualStateManager.VisualStateGroups>
            <!--  로딩 상태 그룹  -->
            <VisualStateGroup x:Name="LoadingStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.3" />
                </VisualStateGroup.Transitions>

                <VisualState x:Name="NotLoading">
                    <Storyboard>
                        <DoubleAnimation
                            Storyboard.TargetName="LoadingOverlay"
                            Storyboard.TargetProperty="Opacity"
                            To="0"
                            Duration="0:0:0.3" />
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingOverlay" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.3" Value="{x:Static Visibility.Collapsed}" />
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <VisualState x:Name="Loading">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingOverlay" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation
                            Storyboard.TargetName="LoadingOverlay"
                            Storyboard.TargetProperty="Opacity"
                            To="1"
                            Duration="0:0:0.3" />
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>

            <!--  데이터 상태 그룹  -->
            <VisualStateGroup x:Name="DataStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.4" />
                </VisualStateGroup.Transitions>

                <VisualState x:Name="HasData">
                    <Storyboard>
                        <DoubleAnimation
                            Storyboard.TargetName="EmptyStatePanel"
                            Storyboard.TargetProperty="Opacity"
                            To="0"
                            Duration="0:0:0.4" />
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="EmptyStatePanel" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.4" Value="{x:Static Visibility.Collapsed}" />
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <VisualState x:Name="NoData">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="EmptyStatePanel" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation
                            Storyboard.TargetName="EmptyStatePanel"
                            Storyboard.TargetProperty="Opacity"
                            To="1"
                            Duration="0:0:0.4" />
                        <DoubleAnimation
                            Storyboard.TargetName="EmptyStateIcon"
                            Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                            From="0.5"
                            To="1"
                            Duration="0:0:0.6">
                            <DoubleAnimation.EasingFunction>
                                <BackEase Amplitude="0.3" EasingMode="EaseOut" />
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation
                            Storyboard.TargetName="EmptyStateIcon"
                            Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                            From="0.5"
                            To="1"
                            Duration="0:0:0.6">
                            <DoubleAnimation.EasingFunction>
                                <BackEase Amplitude="0.3" EasingMode="EaseOut" />
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>

</Window>
